---
layout: default
title: Measure Theory
date: 2025-10-16
# excerpt: A concise walkthrough of the GPU Computing course, updated with modern CUDA idioms, profiling tips, and cross-platform notes.
# tags:
#   - cuda
#   - parallelism
#   - high-performance-computing
---

# Some notes on measure theory

## Measure Spaces

### Introduction

Here we introduce the foundational concepts of **Measure Theory** — specifically - algebras and measurable spaces — by explaining why we can't just measure "everything" and how we define the sets that we *can* measure.

So, we have a set $Ω$ of possible points (which in the context of the previous discussion can be thought of as the set of worlds), and we want to assign a measure (think volume) to subsets of points in $Ω$.

#### Why not measure every set?

It seems intuitive to assign a measure to every possible subset of $\Omega$. However, if our space is "huge" (like $\mathbb{R}^3$), mathematics hits a wall. Set-theoretic paradoxes, such as the **Banach-Tarski Paradox**, prove that you cannot assign a consistent "volume" to every single subset of space without breaking basic logic.

To solve this, we only define measures for a specific collection of "well-behaved" sets. These are called **measurable sets**, and the collection of these sets is called a **$\sigma$-algebra** ($\mathscr{A}$).

### Measurable Spaces and $σ$-algebras

#### Defining the Measurable Space

$\textbf{Definition (Measurable space):}$ A **measurable space** is a pair $(\Omega, \mathscr{A})$, where $\Omega$ is the set of points and $\mathscr{A}$ is the $\sigma$-**algebra** containing the sets we are allowed to measure (contains "measurable sets"). 

#### The Rules of a $\sigma$-algebra

For a collection of sets $\mathscr{A}$ to be a $\sigma$-algebra, it must satisfy three axioms:

1. **Existence**: It must contain the empty set ($\emptyset$) and the entire space ($\Omega$).
2. **Complements**: If a set is in $\mathscr{A}$, its "opposite" (complement) must also be in $\mathscr{A}$.
3. **Countable Operations**: If you have a countable list of sets in $\mathscr{A}$, their union and intersection must also stay within $\mathscr{A}$.

> **Note:** The "$\sigma$" (sigma) usually stands for "sum" or "countable," indicating we can handle infinite lists of sets as long as they are countable.

#### How We Build $\sigma$-algebras (Generation)

$\textbf{Definition (Generation):}$ Let $\Omega$ be a set and $\mathscr{F}$ contains subsets of $\Omega$, then the **$\sigma$-algebra generated by $\mathscr{F}$** is the smallest possible $\sigma$-algebra$ that contains everything in $\mathscr{F}$. 

> **Blunt intuition**: You can think of this as starting with your favorite sets and "shaking them vigorously" until all the necessary complements and unions are included.


*Examples of measurable spaces $(\Omega, \mathscr{A})$*

| Type | Description | Use Case |
| --- | --- | --- |
| **The Power Set ($2^\Omega$)** | Every possible subset is measurable. | Great for finite or countable sets, but fails for "huge" spaces. |
| **Countable-Cofinite** | Contains all sets that are either countable or have a countable complement. | A "coarse" algebra used for specific theoretical proofs. |
| **Borel $\sigma$-algebra** | Generated by all **open sets** of a space $\Omega$ (if $Ω$ is a topological space). | The gold standard for real-world math. It's almost impossible to visualize every set inside it, but it covers everything we actually care about. |

> **Note**: We denote Borel $\sigma$-algebra by $\mathscr{B}(\Omega)$ and call the space $(\Omega, \mathscr{B}(\Omega))$ a **Borel space**, where $\Omega$ is a topological space.

<!-- TODO: Would you like me to walk through a specific example, such as why the power set fails for the real numbers? -->
<!-- TODO: (exercise) Show the the closed sests are in B(Omega) for any topological space Omega. Show that [0,1) is also in B(R). -->

### Measure Spaces

#### Defining the Measure Space

$\textbf{Definition (Measure Space)}$ A **measure space** is a triple $(\Omega, \mathscr{A}, \mu)$. This takes a measurable space $(\Omega, \mathscr{A})$ and adds a function $\mu: \mathscr{A} \rightarrow [0, +\infty]$ called the **measure** and it is defined only on sets in $\sigma$-algebra $\mathscr{A}$.

##### The Axioms of a Measure

$\textbf{Definition (Measure)}$ To be considered a **measure**, the function $\mu: \mathscr{A} \rightarrow [0, +\infty]$ must satisfy two primary rules:

* **Empty Set**: The measure of an empty set must be zero ($\mu(\emptyset) = 0$).
* **Countable Additivity**: If you have a list of disjoint sets ($A_1, A_2, \dots$) in $\mathscr{A}$, the measure of their union must equal the sum of their individual measures:

$$\mu\left(\bigcup_{n} A_n\right) = \sum_{n} \mu(A_n)$$

So, measure is always coupled with a specific measurable set?

> **Remark (Equivalent weaker definitions of $\sigma$-algebra and measure)**: The previously stated axioms for $\mathcal{A}$ and $\mu$ in a way that matches how people usually think about them in practice, but that makes some of the conditions redundant. For instance, if a collection is closed under complements and unions, then it’s automatically closed under intersections as well (by De Morgan’s laws). Below are more minimal sets of axioms, which are handy when you want to verify that something is an algebra $\sigma$-algebra or a measure with less work:
> 
> **(a)** The axioms for $\sigma$-algebra $\mathcal{A}$ can be reduced to:
> 1. $\emptyset \in \mathcal{A}$
> 2. $\mathcal{A}$ is closed under complements and countable unions.
> 
> **(b)** The axioms for measure $\mu$ can be reduced to:
> 1. $\mu(\emptyset)=0$
> 2. If $A$ and $B$ are disjoint, then $\mu(A\cup B)=\mu(A)+\mu(B)$
> 3. If $A_1 \supseteq A_2 \supseteq \cdots$ and $\mu(A_1)<\infty$, then 
> 
> $$\mu\left(\bigcap_n A_n\right)=\lim_{n\to\infty}\mu(A_n).$$

#### Key Terminology and Properties

* **Probability Space**: This is a specific type of measure space where the measure of the entire universe is exactly one ($\mu(\Omega) = 1$).
* **Monotonicity**: If one measurable set $A$ is contained within another set $B$, then the measure of $A$ cannot be larger than the measure of $B$ ($\mu(A) \leq \mu(B)$).
* **Infinite Values**: Unlike probability spaces which are restricted to the range $[0, 1]$, general measure spaces allow a set to have a measure of $+\infty$.

> **Remark (Motivation for at least countable unions/additivity):** We insist on *at least* countable unions and additivity because restricting to only finite unions makes the theory too limited: many natural quantities (like areas) are most easily handled by approximating via limits of infinitely many pieces. For example, it’s too hard to estimate the area of a circle without being able to talk about limits of countably infinitely many triangles.

At the same time, we **do not** allow *uncountable* unions/additivity, since uncountable sums essentially don’t behave well. In particular, there’s a nice basic exercise:

> **Exercise (Tricky).** Let $S$ be an uncountable set of positive real numbers. Show that there is a finite subset $T \subset S$ whose sum exceeds $10^{2019}$. Informally: "you can’t have uncountably many positive numbers that add up to a finite total."
> #TODO: (exercise) prove it

So, countable sums are the largest kind of "infinite sum" we permit — this is a key reason $\sigma$-algebras appear in the first place.

*Examples of Measures:*

Different $\sigma$-algebras allow for different types of measures:
* **Counting Measure**: On a power set $\mathscr{A} = 2^\Omega$, we can define $\mu(A)$ as the number of elements in set $A$. For finite spaces, this can be normalized to $\frac{\lvert A\rvert}{\lvert\Omega\rvert}$ to create a probability space.
* **Countable/Cofinite Measure**: In a space where sets are either countable or have countable complements, we can assign a measure of $0$ to countable sets and $1$ to their complements.
* **Borel Measure**: This is the "standard" volume or area we use in geometry (like the length of an interval on $\mathbb{R}$). While complex to define a measure on $\mathscr{B}(\Omega)$ formally, its goal is to ensure all open sets have a defined volume.

#### Why the Power Set Fails: The Vitali Set

Here we will see why we cannot simply use the power set ($2^\Omega$) for complex spaces like the unit circle in $\mathbb{R}^2$. We argue that restricting to the Borel $\sigma$-algebra $\mathcal{B}(\Omega)$ is not just a technical choice but something you *have* to do. Instead of trying to assign a measure to *every* subset of $\Omega$ (the whole power set $2^\Omega$), you only assign a measure to the subsets that lie in a particular "nice" collection of sets called the **Borel $\sigma$-algebra**, written $\mathcal B(\Omega)$.

In fact, for general spaces such as $\Omega=\mathbb{R}^n$, there’s no way to define a "reasonable" measure on the entire power set $2^\Omega$. (This classic counterexample is known as a **Vitali set**.)

**Example (Geometric reason why $\mathcal{A}=2^\Omega$ fails).**
Let $\Omega$ be the unit circle in $\mathbb{R}^2$, and suppose $\mathcal{A}=2^\Omega$. We’ll show that any measure $\mu$ on $\Omega$ with $\mu(\Omega)=1$ would behave badly.

Define an equivalence relation on $\Omega$: two points are equivalent if you can rotate one to the other by an angle $q\pi$, where $q$ is a rational number (i.e., a rational multiple of $\pi$). Using choice, select exactly one representative from each equivalence class, and call the set of all these representatives $X$.

Then the whole circle can be written as a countable union of rotated copies of $X$:

$$\Omega=\bigcup_{\substack{q\in\mathbb{Q}\ 0\le q<2}} \bigl(\text{(X) rotated by } q\pi\bigr).$$

Since each piece is just a rotation of $X$, they should all have the same measure; call it $m$. But the union covers $\Omega$, so we would get

$$\mu(\Omega)=\sum m.$$

Because there are countably many rationals in $[0,2)$, this sum is either $0$ (if $m=0$) or $+\infty$ (if $m>0$). Either way, it can’t equal $1$. So no such measure can exist on all subsets $2^\Omega$ while behaving nicely with rotations and countable additivity.


<!-- #TODO: Would you like to see the formal proof for why countable additivity is required instead of just finite additivity? -->

### Measurable Functions

Just as topology focuses on **continuous functions** (which preserve open sets), measure theory focuses on **measurable functions** (which preserve measurable sets).


$\textbf{Definition (Measurable function):}$ Let $(X,\mathscr{A})$ and $(B,\mathscr{B})$ be measurable spaces. A function $f: X\to Y$ is **measurable** if, whenever you take a "well-behaved" (measurable) set in the destination $Y$, its "source" (the pre-image in $X$) is also a "well-behaved" set.

* **The Prototypical Example:** An indicator function $1_S$ is a measurable function if and only if the set $S$ itself is a measurable set.

#### Why do we care?

We need functions to be measurable so we can **integrate** them. If a function is non-negative, the integral $\int_{\Omega}fd\mu$ exists if and only if $f$ is measurable.

#### Continuity vs. Measurability

There is a very strong link between these two worlds:
* **The Good News:** Every **continuous function** is Borel measurable. This is because the pre-image of an open set is open, and all open sets are part of the Borel $\sigma$-algebra.
* **The Subtle Trap:** Using the "Devil’s Staircase" (Cantor function), the text shows an edge case. Even if a function $h$ is continuous, you might find a measurable set $D$ whose pre-image $h^{-1}(D)$ is **not** measurable. This usually only happens if you are using the very large "Lebesgue" $\sigma$-algebra instead of the "Borel" one.

> **Remark**: Note that a measurable function actually does not need to be continuous, as the example above shows. On the other hand, most functions you actually encounter in practice will be continuous.

### The Concept of "Almost Everywhere" (a.e.)

$$\boxed{\begin{array}{l} \text{In measure theory, we don't care about what happens on "tiny" sets. A "tiny" set is any set with a measure of zero.} \\ \text{In measure theory, we only care about things up to almost-everywhere.} \end{array}}$$


$\textbf{Definition (a.e., a.s.)}:$ We say a property $P$ holds **almost everywhere** (or **almost surely** in probability) if the set of points where the property *fails* has measure zero:

$$\mu(\lbrace \omega \in \Omega \mid P \text{ does not hold for } \omega \rbrace) = 0.$$

> **Note**: recall the Lebesgue's Criterion for Riemann Integrability.

### Why this is helpful:

* **Equality:** If $f=g$ almost everywhere, measure theory treats them as the same function.
* **Integration:** If two functions are equal almost everywhere, their integrals will be identical: 
  $$\int_\Omega fd\omega=\int_\Omega gd\omega$$.
* **Analogy:** This is similar to "isomorphism" in algebra. The functions might look different at a few specific points, but their "structural" behavior in the eyes of the measure is identical.

<!-- ## 4. Challenge Problems

The text ends with two "harder" problems to test your intuition:

#TODO: * **Problem 35A:** If you have a collection of sets that each "cover" almost the entire space (measure 1), then their countable intersection also covers almost the entire space.
TODO:* **Problem 35B:** This explores the structure of -algebras. It asks you to prove that if a -algebra is countable, it cannot be "infinitely countable"—it must actually be finite, and specifically, its size must be a power of 2 (like ).

--- -->

<!-- **Would you like me to walk through the logic of one of those challenge problems, or perhaps explain the "Devil's Staircase" example in more detail?** -->

---

## 36  Building the Borel and Lebesgue measure

Defining a genuine measure directly on the Borel sets $\mathcal B(\mathbb R^n)$ is a bit unwieldy if you try to do it all at once. A cleaner approach is to introduce two “weaker” objects first:

* **Pre-measure:** behaves like a measure, but it is only defined on a smaller family of sets (an **algebra**, not necessarily a full $\sigma$-algebra).
* **Outer measure:** is defined on *all* subsets of $\Omega$ (i.e. on $2^\Omega$), but it satisfies weaker axioms than a measure.

The big picture is:

$$\text{pre-measure} ;\Longrightarrow; \text{outer measure} ;\Longrightarrow; \text{(true) measure}.$$

## 36.1  Pre-measures

**Guiding example:** take $\Omega=\mathbb R^2$. Start with rectangles and assign them their usual area. We’ll later extend this to a full measure.

The key move is to replace “$\sigma$-algebra” by the finite version:

### Algebra (finite $\sigma$-algebra)

Let $\Omega$ be a set. An **algebra** $\mathcal A\subseteq 2^\Omega$ is a nonempty collection of subsets such that:

1. If $A\in\mathcal A$, then $A^c\in\mathcal A$.
2. If $A,B\in\mathcal A$, then $A\cup B\in\mathcal A$.

Equivalently, it’s like a $\sigma$-algebra, except you only require closure under **finite** unions (instead of countable unions).
Given a family $\mathcal F\subseteq 2^\Omega$, the **algebra generated by $\mathcal F$** is the smallest algebra that contains $\mathcal F$.

### Example: the “rectangle algebra” in $\mathbb R^n$

In $\mathbb R^n$, let $\mathcal L_0$ be the algebra generated by axis-aligned boxes

$$[a_1,b_1]\times\cdots\times[a_n,b_n].$$

A typical set in $\mathcal L_0$ can be built from finitely many such boxes using unions and complements—so it looks like a finite “patchwork” of rectangular pieces. Because only finitely many rectangles are involved, it’s plausible that we can consistently assign “volume” on this collection.

### Pre-measure

A **pre-measure** $\mu_0$ on an algebra $\mathcal A$ is a function

$$\mu_0:\mathcal A\to[0,\infty]$$

such that:

* $\mu_0(\varnothing)=0$,
* **countable additivity holds whenever it makes sense inside $\mathcal A$:**
  if $A_1,A_2,\dots\in\mathcal A$ are pairwise disjoint **and** $\bigcup_{n}A_n\in\mathcal A$, then
  
  $$\mu_0!\left(\bigcup_{n}A_n\right)=\sum_{n}\mu_0(A_n).$$
  
  (The extra condition $\bigcup_n A_n\in\mathcal A$ matters because algebras don’t automatically contain countable unions.)

### Example: pre-measure from area in $\mathbb R^2$

Let $\Omega=\mathbb R^2$ and let $\mathcal L_0$ be generated by rectangles $[a_1,a_2]\times[b_1,b_2]$. Define

$$\mu_0\big([a_1,a_2]\times[b_1,b_2]\big)=(a_2-a_1)(b_2-b_1).$$

This is the usual area on rectangles, and it can be extended to the whole algebra $\mathcal L_0$ (finite unions/complements of rectangles) in the expected way.

### Geometry sanity check (stated, not proved)

For $\Omega=\mathbb R^n$, if $\mathcal L_0$ is generated by rectangular boxes, then there *is* a sensible pre-measure $\lambda_0$ on $\mathcal L_0$ corresponding to $n$-dimensional volume.

The point is: once this foundational geometric step is secure, the rest of the construction can be driven mostly by set theory rather than geometry.

## 36.2  Outer measures

Another way to “weaken” a measure is to keep it defined on *every* subset, but relax the additivity requirement.

### Outer measure

An **outer measure** $\mu^*$ on $\Omega$ is a function

$$\mu^*:2^\Omega\to[0,\infty]$$

satisfying:

1. $\mu^*(\varnothing)=0$,
2. **monotonicity:** if $E\subseteq F$, then $\mu^*(E)\le \mu^*(F)$,
3. **countable subadditivity:** for any sets $E_1,E_2,\dots\subseteq\Omega$,
   
   $$\mu^*!\left(\bigcup_{n}E_n\right)\le \sum_{n}\mu^*(E_n).$$

Intuitively, outer measures often come from “covering a set from the outside” and taking the cheapest possible cover.

### A very general “covering” recipe

If you pick some collection $\mathcal E\subseteq 2^\Omega$ and a cost function $\rho:\mathcal E\to[0,\infty]$, you can define

$$\mu^*(E)=\inf\left{\sum_{n=1}^\infty \rho(E_n);:; E_n\in\mathcal E,; E\subseteq \bigcup_{n=1}^\infty E_n\right}.$$

This always produces an outer measure—but it can be *too* flexible: without constraints, there’s no guarantee the resulting $\mu^*$ matches the “intended” geometry.

So, in practice, it’s better to start from a pre-measure (which already encodes the geometry correctly) and then build the outer measure from that.

## Theorem 36.2.2  Outer measure induced by a pre-measure

Let $\mu_0$ be a pre-measure on an algebra $\mathcal A$ over $\Omega$. Define, for any $E\subseteq\Omega$,

$$\mu^*(E)=\inf\left{\sum_{n=1}^\infty \mu_0(A_n);:; A_n\in\mathcal A,; E\subseteq \bigcup_{n=1}^\infty A_n\right}.$$

Then:

1. $\mu^*$ is an outer measure on $\Omega$.
2. $\mu^*$ **agrees with $\mu_0$ on the algebra**: for every $A\in\mathcal A$,
   
   $$\mu^*(A)=\mu_0(A).$$

**Why (2) is true (core idea):**

* One direction is immediate: $A$ covers itself, so $\mu^*(A)\le \mu_0(A)$.
* For the reverse direction, suppose $A\subseteq \bigcup_n A_n$. Make the cover disjoint by defining
  
  $$
  B_1=A\cap A_1,\quad
  B_2=(A\cap A_2)\setminus B_1,\quad
  B_3=(A\cap A_3)\setminus (B_1\cup B_2),\ \dots
  $$

  Then the $B_n$ are disjoint, each $B_n\subseteq A_n$, and $\bigcup_n B_n=A$. Using the pre-measure property,
  
  $$\mu_0(A)=\sum_n \mu_0(B_n)\le \sum_n \mu_0(A_n).$$
  
  Since this holds for every such cover, $\mu_0(A)\le \mu^*(A)$, giving equality.

### Example intuition

If $\Omega=\mathbb R^2$ and $\lambda_0$ is the rectangle-area pre-measure on $\mathcal L_0$, then $\lambda^*(A)$ is essentially:

> the smallest total area of a countable collection of rectangles whose union contains $A$.

For something like the unit disk, you can picture $\lambda^*(A)$ as “how cheaply you can cover it by rectangles,” and then take the infimum over all such covers.
